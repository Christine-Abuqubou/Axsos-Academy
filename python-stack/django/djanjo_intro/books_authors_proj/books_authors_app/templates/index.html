

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Authors & Books</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>

<h2>Add Author</h2>
<form action="/add_author/" method="POST">
  {% csrf_token %}
  <input type="text" name="first_name" placeholder="First Name" required>
  <input type="text" name="last_name" placeholder="Last Name" required>
  <textarea name="notes" placeholder="Notes"></textarea>
  <button type="submit">Add Author</button>
</form>

<h2>Add Book</h2>
<form action="/add_book/" method="POST">
  {% csrf_token %}
  <input type="text" name="title" placeholder="Book Title" required>
  <textarea name="desc" placeholder="Description"></textarea>
  <select name="author_id" required>
    {% for author in authors %}
      <option value="{{ author.id }}">{{ author.first_name }} {{ author.last_name }}</option>
    {% endfor %}
  </select>
  <button type="submit">Add Book</button>
</form>

<h2>All Authors</h2>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Notes</th>
      <th>Books Count</th>
    </tr>
  </thead>
  <tbody>
    {% for author in authors %}
    <tr>
      <td>{{ author.id }}</td>
      <td>{{ author.first_name }}</td>
      <td>{{ author.last_name }}</td>
      <td>{{ author.notes }}</td>
      <td>{{ author.books.count }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">No authors found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h2>All Books</h2>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Description</th>
      <th>Author</th>
    </tr>
  </thead>
  <tbody>
    {% for book in books %}
    <tr>
      <td>{{ book.id }}</td>
      <td>{{ book.title }}</td>
      <td>{{ book.desc }}</td>
      <td>{{ book.author.first_name }} {{ book.author.last_name }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4">No books found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

</body>
</html>
